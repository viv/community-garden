import{r as t}from"./router-vendor-BDXIhWeD.js";import{Z as O}from"./form-vendor-XO80Fde1.js";function P({initialValues:i,validationSchema:a,onSubmit:E,validate:n}){const[o,y]=t.useState(i),[l,b]=t.useState({}),[u,d]=t.useState({}),[x,g]=t.useState(!1),[B,F]=t.useState(!1),h=t.useCallback((r,e)=>{y(s=>({...s,[r]:e})),l[r]&&b(s=>({...s,[r]:void 0}))},[l]),k=t.useCallback(r=>{const{name:e,value:s,type:c}=r.target;let f=s;c==="checkbox"?f=r.target.checked:c==="number"?f=s===""?"":Number(s):c==="file"&&(f=r.target.files),h(e,f)},[h]),C=t.useCallback(r=>{const{name:e}=r.target;d(s=>({...s,[e]:!0})),j(e)},[]),j=t.useCallback(r=>{const e={};if(a)try{a.parse(o)}catch(s){s instanceof O&&s.errors.forEach(c=>{c.path.includes(r)&&(e[r]=c.message)})}if(n){const s=n(o);s[r]&&(e[r]=s[r])}return b(s=>({...s,...e})),Object.keys(e).length===0},[o,a,n]),p=t.useCallback(()=>{const r={};if(a)try{a.parse(o)}catch(s){s instanceof O&&s.errors.forEach(c=>{const f=c.path.join(".");r[f]=c.message})}if(n){const s=n(o);Object.assign(r,s)}b(r);const e=Object.keys(r).length===0;return F(e),e},[o,a,n]),I=t.useCallback(async r=>{r.preventDefault();const e=Object.keys(o).reduce((s,c)=>({...s,[c]:!0}),{});if(d(e),!!p()){g(!0);try{await E(o)}catch(s){console.error("Form submission error:",s)}finally{g(!1)}}},[o,p,E]),S=t.useCallback(r=>{y(r?{...i,...r}:i),b({}),d({}),g(!1),F(!1)},[i]),T=t.useCallback(r=>({name:r,value:o[r]||"",onChange:k,onBlur:C,"aria-invalid":u[r]&&l[r]?"true":"false","aria-describedby":l[r]?`${r}-error`:void 0}),[o,k,C,u,l]),Z=t.useCallback(r=>u[r]?l[r]:void 0,[u,l]),m=t.useCallback(r=>u[r]&&!!l[r],[u,l]);return{values:o,errors:l,touched:u,isSubmitting:x,isValid:B,setValue:h,handleChange:k,handleBlur:C,handleSubmit:I,validateField:j,validateForm:p,reset:S,getFieldProps:T,getFieldError:Z,hasFieldError:m}}export{P as u};
//# sourceMappingURL=useForm-BF5RBW5i.js.map
